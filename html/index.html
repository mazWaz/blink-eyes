<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIF Manager</title>
    <style>
        /* General Styles */
        html,
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background: radial-gradient(circle, #121212, #1a1a1a);
            color: #ffffff;
        }

        .container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(145deg, #222222, #292929);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.5);
            box-sizing: border-box;
        }
        h1 img {
            width: 100%;
            /* Smaller size */
            height: 100%;
            /* Smaller size */
   
        }

        h2 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #f1f1f1;
            font-weight: bold;
            text-transform: uppercase;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 5px;
        }

        .gif-display {
            flex: 0 0 20%;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 500px;
        }

        .gif-display-wrapper {
            width: 250px;
            /* Set fixed width */
            height: 250px;
            /* Set fixed height */
            border: 3px solid #ffd700;
            border-radius: 50%;
            /* Make the wrapper circular */
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            box-shadow: 0 4px 10px rgba(255, 215, 0, 0.3);
            text-align: center;
            overflow: hidden;
            /* Ensure that the image does not overflow the circular border */
        }

        .gif-display img {
            width: 100%;
            /* Ensure the image fits the width of the container */
            height: 100%;
            /* Ensure the image fits the height of the container */
            object-fit: cover;
            /* Ensure the image covers the entire area, cropping if necessary */
            border-radius: 50%;
            /* Make the image circular */
            display: block;
            /* Make sure the image is displayed */
            margin: 0 auto;
            /* Center the image horizontally */
        }

        .placeholder {
            font-size: 1.2rem;
            color: #777;
            margin: 0;
        }

        .gif-upload {
            flex: 0 0 15%;
            width: 100%;
            max-width: 500px;
            padding: 10px;
            text-align: center;
        }

        input[type="file"] {
            padding: 10px;
            font-size: 1rem;
            color: #ffffff;
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: border-color 0.3s;
        }

        input[type="file"]:focus {
            outline: none;
            border-color: #ffd700;
        }

        button {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            color: #121212;
            background: linear-gradient(145deg, #ffd700, #e6c200);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.3s;
            font-weight: bold;
            letter-spacing: 1px;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(255, 215, 0, 0.5);
        }

        .gif-list {
            flex: 1;
            width: 100%;
            max-width: 500px;
            overflow-y: auto;
            border: 1px solid #444;
            border-radius: 15px;
            background: linear-gradient(145deg, #1f1f1f, #292929);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
            padding: 15px;
            text-align: center;
        }

        ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        ul li {
            margin-bottom: 15px;
            justify-content: space-between;
            display: flex;
            align-items: center;
            padding: 10px;
            background: #2a2a2a;
            border-radius: 12px;
            transition: transform 0.2s ease, background 0.3s;
        }

        ul li:hover {
            transform: scale(1.05);
            background: #333;
        }

        ul li img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            margin-right: 15px;
            border-radius: 10px;
            border: 2px solid #ffd700;
            box-shadow: 0 2px 6px rgba(255, 215, 0, 0.4);
        }

        ul li span {
        color: #ffffff;
        font-size: 1rem;
        text-align: center; /* Center the text */
        }

        ul li .file-info {
            display: flex;
            align-items: center;
            justify-content: center; /* Center the image and file name horizontally */
        }


        button {
            padding: 10px;
            font-size: 1rem;
        }
            .button-container {
            display: flex;
            justify-content: flex-start; /* Align buttons to the left (you can change this to 'center' or 'flex-end' if needed) */
            gap: 10px; /* Space between the buttons */
            align-items: center; /* Vertically center the buttons */
            width: 100%; /* Ensure the container takes up the full width */
        }

#upload-btn {
    padding: 10px 20px;
    font-size: 1rem;
    background: #ffd700;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.3s;
}

#upload-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(255, 215, 0, 0.5);
}

#settings-btn {
    background: transparent; /* Transparent background */
    border: none;
    cursor: pointer;
    padding: 5px; /* Smaller padding for a smaller button */
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%; /* Circular button */ 
    box-shadow: 0 2px 6px rgba(255, 255, 255, 0.3);
    transition: transform 0.2s, box-shadow 0.3s;
    width: 50px; /* Set a fixed width for the button */
    height: 50px; /* Set a fixed height for the button */
}

#settings-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(255, 215, 0, 0.5);
}

.settings-icon {
    width: 30px; /* Set a smaller size for the icon */
    height: 30px;
}


        /* Media Queries for Responsiveness */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }

            h2 {
                font-size: 1.2rem;
            }

            .gif-display {
                flex: 0 0 30%;
            }

            .gif-upload {
                flex: 0 0 20%;
                padding: 5px;
            }

            
            .gif-list {
                padding: 10px;
            }

            ul li img {
                width: 50px;
                height: 50px;
            }

            ul li span {
                font-size: 0.9rem;
            }
        }
        canvas {
            display: none; /* Hide the canvas */
        }
    </style>
</head>

<body>
    <canvas id="gifCanvas"></canvas>
    <div class="container">
        <h1><img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3MzAuNTMgMzI4Ljc0Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmY2YwMDt9LmNscy0ye2ZpbGw6I2ZmZjt9LmNscy0ze2ZpbGw6I2ZkZWViYjt9LmNscy00e2ZpbGw6I2Y2ZDIxNTt9PC9zdHlsZT48L2RlZnM+PGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+PGcgaWQ9IkxheWVyXzEtMiIgZGF0YS1uYW1lPSJMYXllciAxIj48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik01OS4yNCwyMDMuMDVjMTMuNTEsMCwxOC42LDUuMjgsMTguNiwxNi4xNXY0LjdjMCw1LjQ5LTIuMTUsOS43LTYuMTcsMTIuNDQsNC41MSwyLjY0LDYuNjYsNi44NSw2LjY2LDEyLjYzdjUuNjhDNzguMzMsMjY1LDc0LDI3MS41OSw2MSwyNzEuNTlIMi45NEEyLjYsMi42LDAsMCwxLDAsMjY4LjY1VjIwNmEyLjYsMi42LDAsMCwxLDIuOTQtMi45M1pNNTUsMjMxLjU0YzYuNTYsMCw4LjQyLTIsOC40Mi01Ljc4di0zLjMzYzAtNC0yLjE2LTUuODctNy4yNS01Ljg3aC00MGMtLjg5LDAtMS4yOC4zOS0xLjI4LDEuMjd2MTMuNzFaTTE0Ljg4LDI1Ni44YzAsLjg4LjM5LDEuMjgsMS4yOCwxLjI4SDU2LjNjNS4xOSwwLDcuMjUtMS44Niw3LjI1LTZ2LTMuNzJjMC00LTItNi4xNy04LjUyLTYuMTdIMTQuODhaIi8+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMTAyLjUxLDIwMy4wNWExLjg4LDEuODgsMCwwLDEsMi4xNiwyLjE1djM5LjA3YzAsMTAuMzgsMi45NCwxMy40MSwxMywxMy40MWgzOS42NmExLjg4LDEuODgsMCwwLDEsMi4xNSwyLjE2djkuNTlhMS44OCwxLjg4LDAsMCwxLTIuMTUsMi4xNkgxMTcuMWMtMTkuNzgsMC0yNy4zMS03LTI3LjMxLTI1Ljg1VjIwNS4yYTEuODcsMS44NywwLDAsMSwyLjE1LTIuMTVaIi8+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMTgxLjE0LDIwMy4wNWExLjg3LDEuODcsMCwwLDEsMi4xNSwyLjE1djY0LjIzYTEuODgsMS44OCwwLDAsMS0yLjE1LDIuMTZIMTcwLjU2YTEuODgsMS44OCwwLDAsMS0yLjE1LTIuMTZWMjA1LjJhMS44NywxLjg3LDAsMCwxLDIuMTUtMi4xNVoiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0yMTMuNzQsMjAzLjA1YzcsMCw4LjUyLDEuMTcsMTEuMzYsNS43N2wzNi40Myw0Ny43OWExLjMxLDEuMzEsMCwwLDAsMS4yNy42OGguODhjLjQ5LDAsLjc4LS4yOS43OC0xVjIwNS4yYTEuODgsMS44OCwwLDAsMSwyLjE2LTIuMTVIMjc2LjlhMS44NywxLjg3LDAsMCwxLDIuMTUsMi4xNXY1Ni4yMWMwLDcuOTMtMi44NCwxMC4xOC04LjgxLDEwLjE4aC04LjQyYy03LDAtOC41Mi0xLjE4LTExLjM2LTUuNzhMMjEzLjk0LDIxOGExLjQzLDEuNDMsMCwwLDAtMS4yNy0uNjloLS44OWMtLjU4LDAtLjc4LjMtLjc4LDF2NTEuMTFhMS44OCwxLjg4LDAsMCwxLTIuMTUsMi4xNkgxOTguNTdhMS44OSwxLjg5LDAsMCwxLTIuMTYtMi4xNnYtNTYuMmMwLTcuOTMsMi43NC0xMC4xOCw4LjcyLTEwLjE4WiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTMwNC45LDIwMy4wNWExLjg3LDEuODcsMCwwLDEsMi4xNSwyLjE1djI2LjA1aDEzLjgxYzYuMTcsMCw4LS42OSwxMC44Ny00LjQxbDE2Ljg0LTIyLjUyYy42OC0uODgsMS4wOC0xLjI3LDIuODQtMS4yN2gxMi4xNGExLjQyLDEuNDIsMCwwLDEsMS4yNywyLjM1bC0xOSwyNC41N2EzMy4zMiwzMy4zMiwwLDAsMS01Ljg4LDYuNTYsMjcuODEsMjcuODEsMCwwLDEsNy40NCw3LjA1TDM2Ny40NywyNjljLjQ5LjY5LjY4LDIuNTUtMS4yOCwyLjU1SDM1My42NmEyLjc5LDIuNzksMCwwLDEtMi43NC0xLjI3TDMzMi45LDI0N2MtMi42NC0zLjQzLTQuNzktNC40LTExLTQuNEgzMDcuMDV2MjYuODJhMS44OCwxLjg4LDAsMCwxLTIuMTUsMi4xNkgyOTQuMzJhMS44OCwxLjg4LDAsMCwxLTIuMTUtMi4xNlYyMDUuMmExLjg4LDEuODgsMCwwLDEsMi4xNS0yLjE1WiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTQ3OC4yMSwyMDMuMDVjMS40NiwwLDIuMjUuNjgsMi4yNSwyLjE1djkuM2MwLDEuNDctLjc5LDIuMTYtMi4yNSwyLjE2SDQzNS40MmMtMTAuMTksMC0xMywzLTEzLDEzLjMxdjFoNTUuMzJhMS44OSwxLjg5LDAsMCwxLDIuMTYsMi4xNnY3LjczYTEuODksMS44OSwwLDAsMS0yLjE2LDIuMTZINDIyLjM5djEuNjZjMCwxMC4yOCwyLjg0LDEzLjMyLDEzLDEzLjMyaDQyLjc5YzEuNDYsMCwyLjI1LjY4LDIuMjUsMi4xNXY5LjNjMCwxLjQ3LS43OSwyLjE2LTIuMjUsMi4xNkg0MzUuMTJjLTE5Ljc4LDAtMjcuMzItNy0yNy4zMi0yNS44NVYyMjguOWMwLTE4LjgsNy41NC0yNS44NSwyNy4zMi0yNS44NVoiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik01MDAuNzIsMjAzLjA1YTIuMzcsMi4zNywwLDAsMSwyLjM1LDEuMTdsMjYuMjQsMzUuMzUsMjYuMjUtMzUuMzVhMi4zNywyLjM3LDAsMCwxLDIuMzUtMS4xN2gxMi44MmExLjE1LDEuMTUsMCwwLDEsLjg4LDJsLTM1LjE1LDQ1LjYydjE4LjhhMS44OCwxLjg4LDAsMCwxLTIuMTUsMi4xNkg1MjMuNzNhMS44OCwxLjg4LDAsMCwxLTIuMTUtMi4xNnYtMTguOEw0ODYuNzIsMjA1Yy0uNjgtLjg5LS4yOS0yLC44OC0yWiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTY0NC4yNywyMDMuMDVjMS40NiwwLDIuMjUuNjgsMi4yNSwyLjE1djkuM2MwLDEuNDctLjc5LDIuMTYtMi4yNSwyLjE2SDYwMS40OGMtMTAuMTksMC0xMywzLTEzLDEzLjMxdjFoNTUuMzNhMS44OCwxLjg4LDAsMCwxLDIuMTUsMi4xNnY3LjczYTEuODgsMS44OCwwLDAsMS0yLjE1LDIuMTZINTg4LjQ1djEuNjZjMCwxMC4yOCwyLjg0LDEzLjMyLDEzLDEzLjMyaDQyLjc5YzEuNDYsMCwyLjI1LjY4LDIuMjUsMi4xNXY5LjNjMCwxLjQ3LS43OSwyLjE2LTIuMjUsMi4xNkg2MDEuMThjLTE5Ljc4LDAtMjcuMzItNy0yNy4zMi0yNS44NVYyMjguOWMwLTE4LjgsNy41NC0yNS44NSwyNy4zMi0yNS44NVoiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03MjUuODMsMjAzLjA1QTEuODgsMS44OCwwLDAsMSw3MjgsMjA1LjJ2OS4zYTEuODgsMS44OCwwLDAsMS0yLjE1LDIuMTZINjc2Ljc3Yy0zLjcyLDAtNS4xOSwyLjA1LTUuMTksNS40OHYzLjMzYzAsMy42MiwxLjY3LDUuNDgsNS4wOSw1LjQ4aDM2LjcyYzExLjI2LDAsMTcuMTQsNi4wNywxNy4xNCwxNi44NHY3Ljg0YzAsOS41LTUuNDksMTYtMTcuMzQsMTZINjU5YTEuODksMS44OSwwLDAsMS0yLjE2LTIuMTZ2LTkuM0ExLjg4LDEuODgsMCwwLDEsNjU5LDI1OGg1MS40YzMuNzMsMCw1LjE5LTIuMDYsNS4xOS01LjQ5di00YzAtMy43Mi0xLjU2LTUuNDgtNS4wOS01LjQ4SDY3My43M2MtMTEuMjYsMC0xNy02LjA3LTE3LTE2Ljg0VjIxOWMwLTkuNSw1LjM4LTE2LDE3LjIzLTE2WiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTE4My44NCwyODkuM2ExLjA4LDEuMDgsMCwwLDEsMS4yNCwxLjI0djUuNTJhMS4wOCwxLjA4LDAsMCwxLTEuMjQsMS4yNEgxNTguNzdjLTUuODEsMC03LjUsMS43NS03LjUsNy43MnY4YzAsNiwxLjY5LDcuNzIsNy41LDcuNzJoMjUuMDdhMS4wOCwxLjA4LDAsMCwxLDEuMjQsMS4yNHY1LjUyYTEuMDgsMS4wOCwwLDAsMS0xLjI0LDEuMjRIMTU4LjQzYy0xMS4zOCwwLTE1LjcyLTQuMDUtMTUuNzItMTQuODd2LTkuN2MwLTEwLjgyLDQuMzQtMTQuODcsMTUuNzItMTQuODdaIi8+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNMjE2LjEzLDI4OS4zYzIuODgsMCw0LjY4Ljc5LDYuNDgsNC4yMmwxOC42NSwzMy44N2MuNC43OS4yMywxLjM1LS42NywxLjM1aC03LjE2YTEuMjcsMS4yNywwLDAsMS0xLjI5LS43M2wtMy45NS03LjI3SDIwMS42NUwxOTcuNzYsMzI4YTEuMjcsMS4yNywwLDAsMS0xLjI5LjczaC03LjMzYy0xLDAtMS4xMy0uNTYtLjY4LTEuMzVsMTguNDMtMzMuODdjMS44LTMuNDMsMy41NS00LjIyLDUuOTItNC4yMlptOC41MSwyNC45LTktMTYuNTZhLjY3LjY3LDAsMCwwLS42Mi0uNGgtLjM0YS42Ny42NywwLDAsMC0uNjIuNGwtOC45MSwxNi41NloiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik0yNzgsMjg5LjNjOC42MywwLDEyLjEyLDQsMTIuMTIsMTEuNjF2My4yNmMwLDYuMzctMi40MiwxMC4xNS04LjM0LDExLjIybDkuNTgsMTEuOTRhLjg2Ljg2LDAsMCwxLS43MywxLjQxaC03LjI3Yy0xLDAtMS4yNC0uMjItMS41OC0uNjdsLTguOS0xMS43OGgtMTguMlYzMjcuNWExLjA4LDEuMDgsMCwwLDEtMS4yNCwxLjI0aC02LjA5YTEuMDgsMS4wOCwwLDAsMS0xLjI0LTEuMjRWMjkxYTEuNDksMS40OSwwLDAsMSwxLjY5LTEuNjlabS0xLjY5LDIwLjE3YzMuNzgsMCw1LjE5LTEuNjksNS4xOS01VjMwMmMwLTMuMzgtMS40MS01LTUuMTktNWgtMjAuOWMtLjUxLDAtLjczLjIyLS43My42N3YxMS43OFoiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik0zNTUuMDksMjg5LjNhMS4wOCwxLjA4LDAsMCwxLDEuMjQsMS4yNHY1LjM1YTEuMDgsMS4wOCwwLDAsMS0xLjI0LDEuMjRIMzI2Ljg2Yy0yLjE0LDAtMywxLjE4LTMsMy4xNnYxLjkxYzAsMi4wOSwxLDMuMTYsMi45MywzLjE2aDIxLjE0YzYuNDgsMCw5Ljg2LDMuNDksOS44Niw5LjY5djQuNTFjMCw1LjQ2LTMuMTYsOS4xOC0xMCw5LjE4SDMxNi42YTEuMDgsMS4wOCwwLDAsMS0xLjI0LTEuMjR2LTUuMzVhMS4wOCwxLjA4LDAsMCwxLDEuMjQtMS4yNGgyOS41OWMyLjE0LDAsMy0xLjE4LDMtMy4xNnYtMi4zMWMwLTIuMTQtLjktMy4xNS0yLjkzLTMuMTVIMzI1LjExYy02LjQ4LDAtOS44LTMuNS05LjgtOS42OXYtNC4xMmMwLTUuNDYsMy4xLTkuMTgsOS45Mi05LjE4WiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTQwNy4xLDI4OS4zYy44NSwwLDEuMy4zOSwxLjMsMS4yNHY1LjUyYzAsLjg0LS40NSwxLjI0LTEuMywxLjI0SDM4OS40MXYzMC4yYTEuMDgsMS4wOCwwLDAsMS0xLjI0LDEuMjRIMzgyYTEuMDgsMS4wOCwwLDAsMS0xLjI0LTEuMjRWMjk3LjNoLTE3LjdjLS44NCwwLTEuMjktLjQtMS4yOS0xLjI0di01LjUyYzAtLjg1LjQ1LTEuMjQsMS4yOS0xLjI0WiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTQyMS4yNCwyODkuM2ExLjA4LDEuMDgsMCwwLDEsMS4yNCwxLjI0VjMxM2MwLDYsMS42OSw3LjcyLDcuNSw3LjcyaDE1LjYxYzUuOCwwLDcuNDQtMS43NSw3LjQ0LTcuNzJWMjkwLjU0YTEuMSwxLjEsMCwwLDEsMS4yNC0xLjI0aDYuMTRhMS4wOCwxLjA4LDAsMCwxLDEuMjQsMS4yNHYyMy4zM2MwLDEwLjgyLTQuMzQsMTQuODctMTUuNzgsMTQuODdINDI5LjY0Yy0xMS4zOCwwLTE1LjcyLTQuMDUtMTUuNzItMTQuODdWMjkwLjU0YTEuMDgsMS4wOCwwLDAsMSwxLjI0LTEuMjRaIi8+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNNDk3LjA5LDI4OS4zYzEyLjIzLDAsMTcuMjQsNC45LDE3LjI0LDE1Ljg5djcuNjZjMCwxMS01LDE1Ljg5LTE3LjI0LDE1Ljg5SDQ3MC43OGExLjUsMS41LDAsMCwxLTEuNy0xLjY5VjI5MWExLjUsMS41LDAsMCwxLDEuNy0xLjY5Wm0tMTkuNDQsMzAuODhhLjY0LjY0LDAsMCwwLC43My43M2gxOC40OWM2LjY1LDAsOC44NC0yLjE0LDguODQtOC43OXYtNi4yYzAtNi42NS0yLjE5LTguNzktOC44NC04Ljc5SDQ3OC4zOGEuNjQuNjQsMCwwLDAtLjczLjczWiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTUyOC43NiwyODkuM2ExLjA4LDEuMDgsMCwwLDEsMS4yNCwxLjI0djM3YTEuMDgsMS4wOCwwLDAsMS0xLjI0LDEuMjRoLTYuMDlhMS4wOCwxLjA4LDAsMCwxLTEuMjQtMS4yNHYtMzdhMS4wOCwxLjA4LDAsMCwxLDEuMjQtMS4yNFoiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik01NzAuMjMsMjg5LjNjMTEuNDQsMCwxNS43OCw0LjA1LDE1Ljc4LDE0Ljg3djkuN2MwLDEwLjgyLTQuMzQsMTQuODctMTUuNzgsMTQuODdINTUyLjgyYy0xMS4zOCwwLTE1LjcyLTQuMDUtMTUuNzItMTQuODd2LTkuN2MwLTEwLjgyLDQuMzQtMTQuODcsMTUuNzItMTQuODdabS0yNC41NywyMy45NWMwLDUuOTEsMS42OSw3LjY2LDcuNSw3LjY2SDU2OS45YzUuOCwwLDcuNDktMS43NSw3LjQ5LTcuNjZ2LTguNDZjMC01LjkxLTEuNjktNy42Ni03LjQ5LTcuNjZINTUzLjE2Yy01LjgxLDAtNy41LDEuNzUtNy41LDcuNjZaIi8+PHBhdGggY2xhc3M9ImNscy0zIiBkPSJNMzU4Ljg3LDBhLjc2Ljc2LDAsMCwwLDAsLjE1aC0yLjc0YS43Ni43NiwwLDAsMCwwLS4xNVoiLz48cGF0aCBjbGFzcz0iY2xzLTMiIGQ9Ik0zNzIuODMsMGEuNzYuNzYsMCwwLDAsMCwuMTVIMzcwLjFhLjc2Ljc2LDAsMCwwLDAtLjE1WiIvPjxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTTM3MC4xLjE1aDIuNzRjMy4zNy4xOCw2LjczLjQ3LDEwLjA5LjgycTQuNDQuNDUsOC44NiwxLjEsNSwuNzQsMTAsMS43NGM0Ljk0LDEsOS44NSwyLjEzLDE0LjcsMy41LDMuMDUuODcsNi4wNywxLjg0LDkuMDcsMi44OCwzLjY5LDEuMjgsNy4zNSwyLjY2LDExLDQuMWEyMS44NCwyMS44NCwwLDAsMSw4LjMyLDUuNiwyMy44NCwyMy44NCwwLDAsMSw0LjE2LDYuNTdBNDYuNzIsNDYuNzIsMCwwLDEsNDUyLDM3LjM0YTcyLjE2LDcyLjE2LDAsMCwxLC42MywxNC4yNCw5Ni43Nyw5Ni43NywwLDAsMS0xLjA5LDEwLjczLDk4LjE2LDk4LjE2LDAsMCwxLTEuOTIsMTAuMzVjLS45LDMuNTYtMS43NCw3LjE1LTIuODQsMTAuNjctLjg0LDIuNy0xLjcxLDUuMzktMi42NSw4LjA2LS44NSwyLjQtMS43OCw0Ljc4LTIuNzQsNy4xMy0uODUsMi4xLTEuNzgsNC4xNy0yLjcyLDYuMjMtLjg4LDEuOS0xLjgsMy43OS0yLjc2LDUuNjVzLTEuODIsMy41Mi0yLjgxLDUuMjRjLTEuNzcsMy4wNy0zLjU4LDYuMTEtNS41NCw5LjA2cS0yLjU2LDMuOS01LjM5LDcuNjQtMi42OSwzLjU2LTUuNTYsN2MtMS43MywyLTMuNSw0LTUuMzYsNS45M2ExMDkuMSwxMDkuMSwwLDAsMS04LjMyLDcuNzdBOTUuNDIsOTUuNDIsMCwwLDEsMzkyLDE2MWE5Myw5MywwLDAsMS0xNCw3LjE4LDU5LjYyLDU5LjYyLDAsMCwxLTcuMTQsMi40Nyw1LjIzLDUuMjMsMCwwLDEtMS40Mi4yNWMtLjgxLDAtMS4xNi0uMjYtMS4yMS0xLjA4YTEzLjY1LDEzLjY1LDAsMCwxLDAtMi4xMmMuMTUtMS45LjA5LTMuOC4xOS01LjY5LjE2LTMuMjksMC02LjU4LS4xMS05Ljg2LDAtMS4yOC0uMTYtMi41NS0uMjQtMy44MmE2LjE4LDYuMTgsMCwwLDEsMC0xLjM2Yy4xNC0uODcuNDUtMS4xOCwxLjMyLTEuMjdhMjIuMTgsMjIuMTgsMCwwLDEsMi4zLS4xNGMyLjM1LDAsNC43LDAsNy4wNi4wOWE2My43Nyw2My43NywwLDAsMCwxMC41Mi0uNSw0MC44NCw0MC44NCwwLDAsMCwxMC4wNS0yLjc2LDMyLjM5LDMyLjM5LDAsMCwwLDkuNTYtNi4wOCwzMi44OSwzMi44OSwwLDAsMCw0LjEtNC42NCwzOS45LDM5LjksMCwwLDAsMy01LDM1LjkzLDM1LjkzLDAsMCwwLDIuODEtNy45LDI2LjUsMjYuNSwwLDAsMCwuNjEtOC42OSwyNy43OCwyNy43OCwwLDAsMC0yLjA2LTguMywzMy42MywzMy42MywwLDAsMC02LjI5LTEwLjEyLDMyLjMxLDMyLjMxLDAsMCwwLTQuMDUtMy44OCw5LjY1LDkuNjUsMCwwLDEtMS0uOTMsMS4zLDEuMywwLDAsMSwwLTIuMTRBMjAuNDksMjAuNDksMCwwLDEsNDA3Ljg3LDgzYy4yNi0uMjIuNTMtLjQyLjc3LS42NmE0MS4xOSw0MS4xOSwwLDAsMCw0LjU0LTUuMDZBMzIuMywzMi4zLDAsMCwwLDQxOC44NSw2NWEyNy42NSwyNy42NSwwLDAsMCwuMjgtMTEuMTMsMzMuMTUsMzMuMTUsMCwwLDAtMi42Ni04LjMxYy0uNDUtLjk0LTEtMS44Ni0xLjQ2LTIuNzhhMzEuMjQsMzEuMjQsMCwwLDAtNi43LTguMjlBMzIuNzUsMzIuNzUsMCwwLDAsMzk2LjY4LDI4YTQ1LjQxLDQ1LjQxLDAsMCwwLTcuNzgtMS43OCw1OS43NSw1OS43NSwwLDAsMC05LjE3LS40NGwtOS4xOS4xMS0uNTksMGMtMS4xNC0uMDgtMS41My0uNDctMS41NC0xLjU5LDAtLjg1LDAtMS43LDAtMi41NXEwLTkuMjcsMC0xOC41NWE4LjcyLDguNzIsMCwwLDEsLjEtMS40NEExLjcsMS43LDAsMCwxLDM3MC4xLjE1WiIvPjxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTTM1Ni4xNC4xNWgyLjc0YTEuNTMsMS41MywwLDAsMSwxLjM2LDEuNDIsOS41Miw5LjUyLDAsMCwxLC4xNCwxLjZxMCwxMC40NywwLDIwLjkzYTUuNzYsNS43NiwwLDAsMSwwLC41OSwxLjE1LDEuMTUsMCwwLDEtMS4yOCwxLjE5Yy0xLjM5LDAtMi43OCwwLTQuMTcsMGwtNDEuNzksMGExMS42OCwxMS42OCwwLDAsMC0xLjg2LjE2LDEuODIsMS44MiwwLDAsMC0xLjY1LDEuNDgsNS4zNiw1LjM2LDAsMCwwLS4xNSwxLjI2cTAsOC4xNiwwLDE2LjMzYTUuNjgsNS42OCwwLDAsMCwwLC41OSwyLjM3LDIuMzcsMCwwLDAsMi4xNSwyLjQ1YzEuMjguMjcsMi41OC4zNCwzLjg1LjY5YTE1LjIyLDE1LjIyLDAsMCwxLDkuNDMsNywxNi4xNywxNi4xNywwLDAsMSwyLjI4LDcuODFjLjA4LDIuMTMsMCw0LjI2LDAsNi4zOHEwLDE4LjEyLDAsMzYuMjRhMTkuNCwxOS40LDAsMCwxLS44NSw2LjIsMTQuODksMTQuODksMCwwLDEtOS40Myw5LjU3LDI1LDI1LDAsMCwxLTguNDQsMS4yOWMtMi4yMiwwLTQuNDMsMC02LjY0LjA2YTIuMzEsMi4zMSwwLDAsMS0yLjI0LTEuMjRjLTEuNDctMi41NS0zLTUuMDYtNC40My03LjY1LTEtMS43OS0xLjg1LTMuNjMtMi44Mi01LjQyLTEuMDYtMi0xLjg4LTQtMi44NS02cy0xLjgxLTQuMjgtMi43NC02LjRjLTEuMDctMi40NC0xLjg2LTUtMi43OS03LjQ3LTEuMS0yLjk1LTEuODktNi0yLjgtOS0xLjE0LTMuNzQtMS44OC03LjU4LTIuNzQtMTEuMzhhOTksOTksMCwwLDEtMS43Ny0xMS41OCw4MC43Myw4MC43MywwLDAsMS0uNDUtOC4yM2MwLTIuODMsMC01LjY3LjI0LTguNDlhNDQuMTksNDQuMTksMCwwLDEsMS42MS05LjM2LDM3LjIyLDM3LjIyLDAsMCwxLDIuNTUtNi41N0EyMS4yOSwyMS4yOSwwLDAsMSwyODUuODcsMThhMjMsMjMsMCwwLDEsNS45LTMuNDljMy4zNy0xLjQyLDYuNzctMi43NSwxMC4yMi00YTE4NC4wNywxODQuMDcsMCwwLDEsMTguMjctNS4yN3E3Ljc0LTEuODEsMTUuNTktMyw1LjgzLS45MSwxMS43My0xLjQ0QzM1MC40My41NiwzNTMuMjguMywzNTYuMTQuMTVaIi8+PHBhdGggY2xhc3M9ImNscy00IiBkPSJNMzY4LjY2LDcxLjkxSDM1NC41M0ExMSwxMSwwLDAsMSwzNTMsNzEuOGExLjYzLDEuNjMsMCwwLDEtMS40Ny0xLjMzLDUuMjksNS4yOSwwLDAsMS0uMTQtMS4yNnEwLTkuMTgsMC0xOC4zN2MwLS4yMywwLS40NiwwLS42OC4xOC0xLjU5Ljc2LTIsMi4zMi0yLjE2LjUsMCwxLDAsMS41MywwLDksMCwxOC0uMDgsMjcuMDYsMGExMC43NywxMC43NywwLDAsMSw2LjM3LDIsOC40Miw4LjQyLDAsMCwxLDEuMzEsMS4yMkExMi4xMywxMi4xMywwLDAsMSwzOTIuODIsNTdhMTQuNDIsMTQuNDIsMCwwLDEtMSw5LjI5LDkuMjcsOS4yNywwLDAsMS03LjEsNS4zNSwyNi4yMiwyNi4yMiwwLDAsMS00LjMzLjI1QzM3Ni40OSw3MS45NCwzNzIuNTcsNzEuOTEsMzY4LjY2LDcxLjkxWiIvPjxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTTM2OC41MSwxMjMuMzhjLTQuNTYsMC05LjEzLDAtMTMuNywwYTcuNSw3LjUsMCwwLDEtMS45NC0uMTcsMS43MywxLjczLDAsMCwxLTEuMzEtMS40MSw3Ljc1LDcuNzUsMCwwLDEtLjE2LTEuNnEwLTguOTIsMC0xNy44NmE2LjksNi45LDAsMCwxLC4xNy0xLjQzLDEuNjIsMS42MiwwLDAsMSwxLjM1LTEuMzYsNy42OCw3LjY4LDAsMCwxLDEuNTEtLjE3YzguNjgsMCwxNy4zNiwwLDI2LDBhMTkuODIsMTkuODIsMCwwLDEsNC40Ny40OSwxMC41MiwxMC41MiwwLDAsMSw4LjE5LDkuMywxNi4xMywxNi4xMywwLDAsMS0uNzcsNi44NywxMC42MSwxMC42MSwwLDAsMS00LjM0LDUuNywxMC4zOSwxMC4zOSwwLDAsMS01LjEzLDEuNiw1LjgyLDUuODIsMCwwLDEtLjU5LDBaIi8+PHBhdGggY2xhc3M9ImNscy00IiBkPSJNMzM5LDE0NS41MkgzNTguN2E0LjM1LDQuMzUsMCwwLDEsLjUxLDBjLjg1LjE0LDEuMTkuNDksMS4yLDEuMzYsMCwxLjE5LDAsMi4zOCwwLDMuNTd2MTkuMjJjMCwxLjUyLS4xNCwxLjYyLTEuNjMsMS4yYTc3LjkzLDc3LjkzLDAsMCwxLTEwLjgzLTQsODguNjgsODguNjgsMCwwLDEtMTQuMTEtOGMtMi44Mi0yLTUuNTMtNC04LjE2LTYuMjUtMi4zMy0xLjk0LTQuNDktNC4wNi02LjcxLTYuMTJhMS43NywxLjc3LDAsMCwxLS4zMS0uMy40My40MywwLDAsMSwuMzMtLjczYy4zNiwwLC43MywwLDEuMSwwbDE4LjEyLDBaIi8+PC9nPjwvZz48L3N2Zz4='alt="Logo"> 
           </h1>

        <div class="gif-display">
            <div class="gif-display-wrapper">
                <img id="current-gif" src="" alt=" ">
            </div>
        </div>

        <div class="gif-upload">
            <h2>Upload GIF</h2>
            <input type="file" id="gif-input" accept="image/gif">
        <div class="button-container">
            <button id="upload-btn">Upload</button>
            <button id="settings-btn">
                <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiB4PSIwIiB5PSIwIiB2aWV3Qm94PSIwIDAgNTQ4LjI1IDU0OC4yNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgY2xhc3M9IiI+PGc+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMzQxLjI5MiAxNy42NzJzMTkuMDk5IDU1LjQxMiAxOS4wOTkgNTUuMzg2YTIxNy4zODcgMjE3LjM4NyAwIDAgMSA0NC43MDIgMjUuODMxbDU3LjU1My0xMS4xNjljNi42ODEtMS4zIDEzLjU2NiAxLjA3MSAxOC4wNTQgNi4xOTdhMjc0LjM1MyAyNzQuMzUzIDAgMCAxIDUyLjc2IDkxLjQxNyAxOS4xMyAxOS4xMyAwIDAgMS0zLjY0NyAxOC43NDJzLTM4LjQyOCA0NC4yNDItMzguNDI4IDQ0LjIxN2EyMTguNjA2IDIxOC42MDYgMCAwIDEgMCA1MS42MzdsMzguNDI4IDQ0LjI0MmExOS4xMyAxOS4xMyAwIDAgMSAzLjY0NyAxOC43NDIgMjc0LjM0MyAyNzQuMzQzIDAgMCAxLTUyLjc2IDkxLjQxN2MtNC40ODggNS4xMjYtMTEuMzczIDcuNDk3LTE4LjA1NCA2LjE5NyAwIDAtNTcuNTUzLTExLjE2OS01Ny41MjgtMTEuMTY5YTIxNy41OTUgMjE3LjU5NSAwIDAgMS00NC43MjcgMjUuODA2bC0xOS4wOTkgNTUuNDExYTE5LjE0MiAxOS4xNDIgMCAwIDEtMTQuMzgyIDEyLjU0NiAyNzQuMzY2IDI3NC4zNjYgMCAwIDEtMTA1LjU3IDAgMTkuMTQyIDE5LjE0MiAwIDAgMS0xNC4zODItMTIuNTQ2cy0xOS4wOTktNTUuNDExLTE5LjA5OS01NS4zODZhMjE3LjM0NiAyMTcuMzQ2IDAgMCAxLTQ0LjcwMi0yNS44MzJMODUuNjA0IDQ2MC41M2MtNi42ODEgMS4zMDEtMTMuNTY2LTEuMDcxLTE4LjA1NC02LjE5N2EyNzQuMzQ3IDI3NC4zNDcgMCAwIDEtNTIuNzYtOTEuNDE4IDE5LjEzIDE5LjEzIDAgMCAxIDMuNjQ2LTE4Ljc0MnMzOC40MjktNDQuMjQyIDM4LjQyOS00NC4yMTdhMjE4LjYxNSAyMTguNjE1IDAgMCAxIDAtNTEuNjM4bC0zOC40MjgtNDQuMjQyYTE5LjEzMyAxOS4xMzMgMCAwIDEtMy42NDctMTguNzQyIDI3NC4zNzIgMjc0LjM3MiAwIDAgMSA1Mi43NTktOTEuNDE4YzQuNDg4LTUuMTI2IDExLjM3My03LjQ5NyAxOC4wNTQtNi4xOTYgMCAwIDU3LjU1MyAxMS4xNjkgNTcuNTI4IDExLjE2OWEyMTcuNjIgMjE3LjYyIDAgMCAxIDQ0LjcyNy0yNS44MDZsMTkuMDk5LTU1LjQxMWExOS4xNDIgMTkuMTQyIDAgMCAxIDE0LjM4Mi0xMi41NDYgMjc0LjM2NiAyNzQuMzY2IDAgMCAxIDEwNS41NyAwIDE5LjE0IDE5LjE0IDAgMCAxIDE0LjM4MyAxMi41NDZ6TTI3NC4xMjUgMTYxLjM5Yy02Mi4yMiAwLTExMi43MzYgNTAuNTE1LTExMi43MzYgMTEyLjczNnM1MC41MTUgMTEyLjczNSAxMTIuNzM2IDExMi43MzVTMzg2Ljg2IDMzNi4zNDUgMzg2Ljg2IDI3NC4xMjUgMzM2LjM0NSAxNjEuMzkgMjc0LjEyNSAxNjEuMzl6bTAgMzguMjVjNDEuMTA2IDAgNzQuNDg1IDMzLjM4IDc0LjQ4NSA3NC40ODVzLTMzLjM3OSA3NC40ODUtNzQuNDg1IDc0LjQ4NS03NC40ODUtMzMuMzc5LTc0LjQ4NS03NC40ODUgMzMuMzc5LTc0LjQ4NSA3NC40ODUtNzQuNDg1eiIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjZmZmZmZmIiBvcGFjaXR5PSIxIiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIj48L3BhdGg+PC9nPjwvc3ZnPg==" alt="Settings Icon" class="settings-icon">
            </button>
        </div>
            
        </div>
        <h2>Uploaded GIFs</h2>
        <div class="gif-list">
            <ul id="gif-list">
                <p class="placeholder">No GIFs uploaded yet.</p>
            </ul>
        </div>
    </div>

    <script>
            const esp32Ip = "http://4.3.2.1";
            // const esp32Ip = "http://127.0.0.1:3000";

            const gifInput = document.getElementById('gif-input');
            const uploadButton = document.getElementById('upload-btn');
            const gifList = document.getElementById('gif-list');
            const currentGif = document.getElementById('current-gif');
            const placeholderText = document.querySelector('.placeholder');
            const canvas = document.getElementById('gifCanvas');

            let uploadedGifs = [];
            let firstFrameBlob = null;

            async function fetchData() {
                    try {
                        const response = await fetch(`${esp32Ip}/list`);
                        const data = await response.text();
                        if(!data){
                            return
                        }
                        const files = data.split("\n");
                        gifList.innerHTML = '';

                        if (files.length === 0) {
                            placeholderText.style.display = 'block';
                            placeholderText.textContent = "No GIF files found on the SD card.";
                        } else {
                            placeholderText.style.display = 'none';
                            uploadedGifs = [];

                            for (let i = 0; i < files.length; i++) {
                                const file = files[i];
                                const listItem = document.createElement("li");
                                listItem.classList.add("file-item");
                                listItem.innerHTML = `
                                <div class="file-info">
                                    <img id="img-${i}" alt="Loading GIF..." width="100">
                                    <span>${file}</span>
                                </div>
                                <div>
                                    <button class="btn btn-danger" onclick="deleteFile('${file}')">Delete</button>
                                </div>
                                    `;
                                gifList.appendChild(listItem);
                                uploadedGifs.push(`img-${i}`);
                                listItem.addEventListener("click", function () {
                                    setFile(file)
                                });
                            }

                            // Load each GIF thumbnail
                            for (let i = 0; i < files.length; i++) {
                                const file = files[i];
                                const imgElementId = uploadedGifs[i];
                                const imgElement = document.getElementById(imgElementId);

                                try {
                                    await loadImage(`${esp32Ip}/cache/${file}`);
                                    imgElement.src = `${esp32Ip}/cache/${file}`;
                                } catch (imgError) {
                                    console.error(`Failed to load image ${file}:`, imgError);
                                    // imgElement.src = "error-placeholder.jpg";
                                    imgElement.alt = "Failed to load image.";
                                }
                            }
                        }
                    } catch (error) {
                        console.error('Failed to load file list:', error);
                        placeholderText.style.display = 'block';
                        placeholderText.textContent = "Failed to load file list from the device.";
                    }
                }

            // Event Listener for Upload Button
            uploadButton.addEventListener('click', async () => {
                const file = gifInput.files[0];
                if (file && file.type === 'image/gif') {
                    try{
                        const formData = new FormData();
                        formData.append('data', file, file.name)

                        const response = await fetch(`${esp32Ip}/upload`, {
                            method: 'POST',
                            body: formData
                        });

                        if(!response.ok){
                            console.error('Error Upload Image:', response.statusText);
                            alert('Failed to upload the first image frame.');
                            return;
                        }

                    } catch (error) {
                        console.error('Error uploading the first frame:', error);
                        alert('Error uploading the first frame.');
                    }

                    const reader = new FileReader();

                    reader.onload = async (event) => {
                        const gifUrl = event.target.result;
                        const img = new Image();
                        img.crossOrigin = "Anonymous";
                        img.src = gifUrl;

                        img.onload = async function () {
                            canvas.width = img.width;
                            canvas.height = img.height;
                            const ctx = canvas.getContext('2d');

                            // Draw the first frame of the GIF onto the canvas
                            ctx.drawImage(img, 0, 0);

                            // Convert to a Blob (JPEG format with 70% quality) for uploading
                            canvas.toBlob(async function (blob) {
                                firstFrameBlob = blob;

                                // Upload the compressed first frame blob to the server
                                try {
                                    const formData = new FormData();
                                    // formData.append('file', firstFrameBlob, file.name);
                                    formData.append('image', firstFrameBlob, file.name);

                                    const response = await fetch(`${esp32Ip}/upload-cache`, {
                                        method: 'POST',
                                        body: formData
                                    });

                                    if (!response.ok) {
                                        console.error('Error uploading first frame:', response.statusText);
                                        alert('Failed to upload the first image frame.');
                                        return;
                                    }

                                    alert('First image frame uploaded successfully!');

                                    // After successful upload, you can display the original GIF or handle next steps
                                    currentGif.src = gifUrl;
                                    await fetchData();

                                } catch (error) {
                                    console.error('Error uploading the first frame:', error);
                                    alert('Error uploading the first frame.');
                                }

                            }, 'image/jpeg', 0.5);
                        };
                    };

                    reader.readAsDataURL(file);
                } else {
                    alert('Please select a valid GIF file.');
                }
            });

            

            function loadImage(url) {
                return new Promise((resolve, reject) => {
                    const img = new Image();
                    img.onload = () => resolve();
                    img.onerror = () => reject(new Error(`Failed to load image at ${url}`));
                    img.src = url;
                });
            }

            function deleteFile(file){
                console.log(file.replace('.jpg', ''))
            }
            function setFile(file){
                console.log(file.replace('.jpg', ''))
            }
            fetchData();

    </script>
</body>

</html>